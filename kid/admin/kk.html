<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>网站栏目管理</title>
    <link href="less/Nstrap.less" type="text/css" rel="stylesheet/less"/>
    <script src="js/less.js"></script>
    <!--[if lt IE 9]>
    <script src="http://apps.bdimg.com/libs/html5shiv/3.7/html5shiv.min.js"></script>
    <script src="http://apps.bdimg.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link href="js/treeTable/css/jquery.treetable.css" type="text/css" rel="stylesheet">
    <link href="js/treeTable/css/jquery.treetable.theme.default.css" type="text/css" rel="stylesheet">
    <link href="js/layer/lay/layer/skin/layer.css" type="text/css" rel="stylesheet">
</head>
<body>
<div class="console-container">
    <div class="row">
        <div class="col-sm-12">
            <div class="console-title clearfix">
                <div class="pull-left">
                    <h5>一年级语文</h5>

                </div>
                <div class="pull-right"><a href="javascript:;"  class="btn btn-link">返回</a> </div>
            </div>
            <hr>
            <div class="search-form">
                <div class="form-inline">
                    <a href="javascript:" class="btn btn-primary"  data-toggle="modal" data-target="#myModal">添加知识点</a>
                </div>
            </div>
            <hr class="hr">
            <table class="treetable table table-hover table-box" id="tree_table2">
                <thead><tr><th> <a href="javascript:;" data-targets='target' data-state="true">[展开]</a>　　知识点名称</th><th width="100" class="text-center">排序</th><th width="200" class="text-right">操作</th></tr></thead>
                <tbody></tbody>
            </table>
        </div>
    </div>
</div>
<!-- Modal -->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="myModalLabel">增加知识点</h4>
            </div>
            <div class="modal-body">
                <div class="form-horizontal">
                    <div class="form-group">
                        <label for="" class="col-sm-2 control-label">所在学段：</label>
                        <div class="col-sm-6">
                            <select class="form-control">
                                <option>学段/年级</option>
                                <option>2</option>
                                <option>3</option>
                                <option>4</option>
                                <option>5</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="" class="col-sm-2 control-label">所属科目：</label>
                        <div class="col-sm-6">
                            <select class="form-control">
                                <option>科目</option>
                                <option>2</option>
                                <option>3</option>
                                <option>4</option>
                                <option>5</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="" class="col-sm-2 control-label">所属知识点：</label>
                        <div class="col-sm-6">
                            <select class="form-control">
                                <option>顶级知识点</option>
                                <option>2</option>
                                <option>3</option>
                                <option>4</option>
                                <option>5</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="" class="col-sm-2 control-label">知识点：</label>
                        <div class="col-sm-10">
                            <input type="text" id="fileName" class="form-control" placeholder="可填写多个知识点用“,”号分隔">
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
                <button type="button" class="btn btn-primary">保存</button>
            </div>
        </div>
    </div>
</div>
</body>
<!-- Bootstrap core JavaScript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<script src="http://cdn.bootcss.com/jquery/1.11.2/jquery.min.js"></script>
<script src="http://cdn.bootcss.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<!-- Just to make our placeholder images work. Don't actually copy the next line! -->
<script src="js/vendor/holder.js"></script>
<!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
<script src="js/ie10-viewport-bug-workaround.js"></script>
<script src="js/browser.js" type="text/javascript"></script>
<script src="js/holder.js" type="text/javascript"></script>
<script src="js/layer/layer/layer.js"></script>

<script type="text/javascript" src="js/treeTable/jquery.treetable.js"></script>
<script type="text/javascript">
    //用于构建动态表格的数据集
    var datastore=[{id:'0',parent:null,name:'指数与指数函数',sort:[1,3,4]},
        {id:'1',parent:'0',name:'对数与对数函数',sort:'1'},
        {id:'2',parent:'0',name:'函数的图象、反函数',sort:'1'},
        {id:'3',parent:'0',name:'函数的值域与最值',sort:'1'},
        {id:'4',parent:'0',name:'函数的零点与方程的根',sort:'1'},
        {id:'5',parent:'0',name:'函数的实际应用与综合应用',sort:'1'},
        {id:'6',parent:'0',name:'导数的概念及其几何意义',sort:'1'},
        {id:'7',parent:null,name:'导数的概念及其几何意义',sort:'0'},
        {id:'8',parent:'7',name:'定积分的运算及应用',sort:'1'},
        {id:'9',parent:'7',name:'利用导数研究函数的单调性',sort:'1'},
        {id:'10',parent:'7',name:'利用导数求函数的极值与最值',sort:'1'},
        {id:'11',parent:'7',name:'导数的综合应用',sort:'1'},
        {id:'12',parent:'7',name:'三角函数的概念',sort:'1'},
        {id:'13',parent:'7',name:'同角三角函数的基本关系和诱导公式',sort:'1'},
        {id:'15',parent:'13',name:'三角函数的图象及其变换',sort:'1'},
        {id:'14',parent:'7',name:'三角函数的性质及其应用',sort:'1'}];
    $(document).ready(function () {
        for(var i=0;i<datastore.length;i++){
            filltr($("#tree_table2"),datastore[i]);
        }
        $("#tree_table2").treetable({expandable:true});
        //expandAll();
        $("#tree_table2 tbody").on("mousedown", "tr", function() {
            $(".selected").not(this).removeClass("selected");
            $(this).toggleClass("selected");
        });
        $("a[data-delete]").on('click',function(){
            layer.confirm('你确定你很帅么？', {icon: 3}, function(index){
                layer.close(index);
                alert('自恋狂');
            });
        });
    });
    function expandAll(){$("#tree_table2").treetable('expandAll'); return false;}
    function collapseAll(){$("#tree_table2").treetable('collapseAll'); return false;}
    function filltr(apendtotable,ddataitem){
        if(ddataitem.sort=='0'){
            $("tbody",apendtotable).append("<tr data-tt-id='"+ddataitem.id+"'><td class='inputTd'><div style='width: 60%; display: inline-table' ><input type='text' value='"+ddataitem.name+" ' class='form-control'></td><td class='inputTd'><input type='text' value='"+ddataitem.sort+" ' class='form-control'></td><td class='text-right'><a href='javascript:;' data-edit='edit' name='"+ddataitem.id+"'>更新</a> / <a href='javascript:;'>移动</a> / <a href='javascript:;' data-delete=''>删除</a></td></tr>");
        }else{
            $("tr[data-tt-id="+ddataitem.parent+"]",apendtotable).after("<tr data-tt-id='"+ddataitem.id+"'  data-tt-parent-id='"+ddataitem.parent+"'><td class='inputTd'><div style='width: 60%; display: inline-table' ><input type='text' value='"+ddataitem.name+" ' class='form-control'></div></td><td class='inputTd'><input type='text' value='"+ddataitem.sort+" ' class='form-control'></td><td class='text-right'><a href='javascript:;' data-edit='edit' name='"+ddataitem.id+"'>更新</a> / <a href='javascript:;'>移动</a> / <a href='javascript:;' data-delete=''>删除</a></td></tr>");
        }
    }
    $("a[data-targets='target']").click(function(){
        alert("1");
        if($(this).attr("data-state") == "true"){
            $(this).attr("data-state","");
            $(this).html("");
            $(this).html("[收起]");
            expandAll();
        }else{
            $(this).attr("data-state","true");
            $(this).html("");
            $(this).html("[展开]");
            collapseAll();
        }
    })

    $("a[data-edit='edit']").bind("click",function(){
        alert("1");
    });

</script>
</html>